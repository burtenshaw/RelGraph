{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ben/research/2020/11_november/potter_graph/app/src/Config.js\";\nimport React from 'react';\nimport { Button, ButtonGroup, Container, Dropdown, InputGroup, FormControl, Form, ListGroup, ListGroupItem, OverlayTrigger, Popover, Tab, Tabs, Row, Nav } from 'react-bootstrap';\nimport Highlighter from \"react-highlight-words\";\nconst book_info = {\n  b1: \"Philosopher's Stone\",\n  b2: \"Chamber of Secrets\",\n  b3: \"Prisoner of Azkaban\",\n  b4: \"Goblet of Fire\",\n  b5: \"Order of the Phoenix\",\n  b6: \"Half-Blood Prince\",\n  b7: \"Deathly Hallows\"\n};\n\nclass RelationView extends React.Component {\n  constructor(props) {\n    super(props);\n  } // onSelectPanNode = (event) => {\n  //     if (this.GraphView) {\n  //       this.ref.GraphView.panToNode(event.target.value, true);\n  //     }\n  //   };\n\n\n  render() {\n    var relation = this.props.relations;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '70vh',\n        overflowY: 'scroll',\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        defaultActiveKey: \"info\",\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"info\",\n          title: \"Relation Info\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: [/*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: \"source\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 40,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: relation.top_sentence\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 41,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: \"target\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 42,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: \"size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 47,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: relation.size\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 48,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: relation.key_words.map(kw => {\n                return /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    margin: '2px'\n                  },\n                  children: kw\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 54,\n                  columnNumber: 49\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"profile\",\n          title: \"Examples\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: relation.relations.map(r => {\n              return /*#__PURE__*/_jsxDEV(ListGroupItem, {\n                children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                  className: \"d-flex\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    children: r.s\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                    trigger: \"click\",\n                    placement: \"top\",\n                    overlay: /*#__PURE__*/_jsxDEV(Popover, {\n                      id: `popover-positioned-top`,\n                      children: [/*#__PURE__*/_jsxDEV(Popover.Title, {\n                        as: \"h3\",\n                        children: [\"Book: \", book_info[r.bi.book], \" Chapter : \", r.bi.chapter.slice(1), \" Page :\", r.bi.page.slice(1)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 77,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Popover.Content, {\n                        children: /*#__PURE__*/_jsxDEV(Highlighter, {\n                          highlightClassName: \"highlighted\",\n                          searchWords: [r.rc],\n                          autoEscape: true,\n                          textToHighlight: r.p\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 79,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 78,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 76,\n                      columnNumber: 49\n                    }, this),\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      block: true,\n                      variant: \"outline-secondary\",\n                      children: [r.rc.slice(0, 20), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 89,\n                      columnNumber: 45\n                    }, this)\n                  }, 'paragraph', false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    children: r.t\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass AgeView extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    var age = this.props.age;\n    var age_freq = Object.entries(age.relation_frequency);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '70vh',\n        overflowY: 'scroll',\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"info\",\n          title: \"Relation Info\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: [/*#__PURE__*/_jsxDEV(ListGroupItem, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: [/*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: \"Frequency\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    marginRight: '3px'\n                  },\n                  children: age.frequency\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: \"n Charcters\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: age.n_characters\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: age_freq.map(c => {\n                  console.log(c);\n                  var scale = c[1] / age.frequency * 10;\n\n                  try {\n                    var color = this.props.config[c[0]].color;\n                  } catch {\n                    var color = 'white';\n                  }\n\n                  return /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    style: {\n                      backgroundColor: color,\n                      width: `${scale}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 49\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: age.characters.map(c => {\n                return /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    margin: '3px'\n                  },\n                  children: c\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 49\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"profile\",\n          title: \"Examples\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: age.relations.map(r => {\n              return /*#__PURE__*/_jsxDEV(ListGroupItem, {\n                children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                  className: \"d-flex\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    children: r.s\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                    trigger: \"click\",\n                    placement: \"top\",\n                    overlay: /*#__PURE__*/_jsxDEV(Popover, {\n                      id: `popover-positioned-top`,\n                      children: [/*#__PURE__*/_jsxDEV(Popover.Title, {\n                        as: \"h3\",\n                        children: \"book placement\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Popover.Content, {\n                        children: /*#__PURE__*/_jsxDEV(Highlighter, {\n                          highlightClassName: \"highlighted\",\n                          searchWords: [r.rc],\n                          autoEscape: true,\n                          textToHighlight: r.rc\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 190,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 189,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 49\n                    }, this),\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      block: true,\n                      variant: \"outline-secondary\",\n                      children: [r.rc.slice(0, 20), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 45\n                    }, this)\n                  }, 'paragraph', false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    children: r.t\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nclass ConnView extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    var conn = this.props.conn;\n    var conn_freq = Object.entries(conn.relation_frequency);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '70vh',\n        overflowY: 'scroll',\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"info\",\n          title: \"Relation Info\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: [/*#__PURE__*/_jsxDEV(ListGroupItem, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  children: \"Frequency\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    marginRight: '3px'\n                  },\n                  children: conn.frequency\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: conn_freq.map(c => {\n                  // console.log(c)\n                  var scale = c[1] / conn.frequency * 10;\n\n                  try {\n                    var color = this.props.config[c[0]].color;\n                  } catch {\n                    var color = 'white';\n                  }\n\n                  return /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    style: {\n                      backgroundColor: color,\n                      width: `${scale}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 49\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"profile\",\n          title: \"Examples\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: conn.relations.map(r => {\n              return /*#__PURE__*/_jsxDEV(ListGroupItem, {\n                children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                  className: \"d-flex\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    children: r.s\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                    trigger: \"click\",\n                    placement: \"top\",\n                    overlay: /*#__PURE__*/_jsxDEV(Popover, {\n                      id: `popover-positioned-top`,\n                      children: [/*#__PURE__*/_jsxDEV(Popover.Title, {\n                        as: \"h3\",\n                        children: \"book placement\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 285,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Popover.Content, {\n                        children: /*#__PURE__*/_jsxDEV(Highlighter, {\n                          highlightClassName: \"highlighted\",\n                          searchWords: [r.rc],\n                          autoEscape: true,\n                          textToHighlight: r.rc\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 286,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 284,\n                      columnNumber: 49\n                    }, this),\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      block: true,\n                      variant: \"outline-secondary\",\n                      children: [r.rc.slice(0, 20), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 45\n                    }, this)\n                  }, 'paragraph', false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-secondary\",\n                    children: r.t\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nclass DataBuilder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.buttonClick = event => {\n      if (this.state.newQuery) {// this.props.parentCallback({data: null,\n        //     config: null});\n        // this.setState({ newQuery : false });\n        // this.getRelation();\n      } // this.props.parentCallback({data: this.state.data,\n      //                             config: this.state.config});\n      // event.preventDefault();\n\n    };\n\n    this.handleClusterQuery = event => {\n      this.state.query.push(event);\n      this.setState({\n        newQuery: true\n      });\n      this.props.parentCallback({\n        query: this.state.query\n      }); // event.preventDefault();\n    };\n\n    this.onSelectRelation = e => {\n      this.setState({\n        relationid: parseInt(e.cluster)\n      });\n    };\n\n    this.handleAgeQuery = event => {// this.state.query.push(event);\n      // this.setState({ newQuery : true});\n      // this.props.parentCallback({query: this.state.query});\n      // event.preventDefault();\n    };\n\n    this.onSelectAge = e => {\n      this.setState({\n        age: e\n      });\n    };\n\n    this.onSelectConn = e => {\n      this.setState({\n        conn: e\n      });\n    };\n\n    var config = JSON.parse(require('./config.json'));\n    var data = JSON.parse(require('./data.json'));\n    var relationslist = JSON.parse(require('./relations.json'));\n    var ages = JSON.parse(require('./ages.json'));\n    var conn = JSON.parse(require('./connections.json'));\n    this.state = {\n      config: this.buildconfig(config),\n      data: this.builddata(data),\n      query: [],\n      newQuery: null,\n      newData: true,\n      relations: config.EdgeTypes,\n      relationview: null,\n      relationid: null,\n      relationslist: relationslist,\n      agesResource: ages,\n      connResource: conn\n    };\n    this.buttonClick = this.buttonClick.bind(this);\n    this.handleClusterQuery = this.handleClusterQuery.bind(this);\n    this.getRelation = this.getRelation.bind(this);\n    this.onSelectRelation = this.onSelectRelation.bind(this); // this.doData = this.doData.bind(this);\n    // this.componentDidUpdate = this.componentDidUpdate.bind(this);\n    // this.componentDidMount = this.componentDidUpdate.bind(this);\n  }\n\n  buildconfig(config) {\n    var NodeTypes = {};\n    config.NodeTypes.map(type => {\n      type.shape = /*#__PURE__*/_jsxDEV(\"symbol\", {\n        viewBox: \"0 0 100 100\",\n        id: type.typeText,\n        children: /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"50\",\n          cy: \"50\",\n          r: \"45\",\n          style: {\n            color: '#ffffff',\n            fill: type.color\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 25\n        }, this)\n      }, \"0\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 21\n      }, this);\n      NodeTypes[type.typeText] = type;\n    });\n    var EdgeTypes = {};\n    config.EdgeTypes.map(type => {\n      type.shape = /*#__PURE__*/_jsxDEV(\"symbol\", {\n        viewBox: \"0 0 200 200\",\n        id: type.typeText,\n        label_from: type.typeText,\n        children: /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"100\",\n          cy: \"100\",\n          r: \"45\",\n          fill: type.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 25\n        }, this)\n      }, \"0\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 21\n      }, this);\n      EdgeTypes[type.typeText] = type;\n    });\n    var PotterConfig = {\n      NodeTypes: NodeTypes,\n      NodeSubtypes: {},\n      EdgeTypes: EdgeTypes\n    };\n    return PotterConfig;\n  }\n\n  builddata(data) {\n    return data;\n  }\n\n  async getRelation() {\n    const response = await fetch('http://localhost:5000/cluster', {\n      method: 'POST',\n      // or 'PUT'\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(this.state.query)\n    });\n    const data = await response.json();\n    console.log(data);\n    this.setState({\n      data: this.builddata(data.data),\n      config: this.buildconfig(data.config)\n    });\n  }\n\n  // componentDidMount () {\n  //     this.props.parentCallback({data: this.state.data,\n  //         config: this.state.config});\n  // }\n  render() {\n    var relationview = this.state.relationid ? /*#__PURE__*/_jsxDEV(RelationView, {\n      ref: this.props.ref,\n      relations: this.state.relationslist[this.state.relationid]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 54\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 158\n    }, this);\n    var ageview = this.state.age ? /*#__PURE__*/_jsxDEV(AgeView, {\n      config: this.state.config.EdgeTypes,\n      age: this.state.age\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 42\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 118\n    }, this);\n    var connview = this.state.conn ? /*#__PURE__*/_jsxDEV(ConnView, {\n      config: this.state.config.EdgeTypes,\n      conn: this.state.conn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 44\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 123\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Tab.Container, {\n        id: \"left-tabs-example\",\n        defaultActiveKey: \"first\",\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Nav, {\n            variant: \"tabs\",\n            className: \"flex-row\",\n            children: [/*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                eventKey: \"first\",\n                children: \"Relations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                eventKey: \"second\",\n                children: \"Ages\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                eventKey: \"third\",\n                children: \"Connections\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Tab.Content, {\n            style: {\n              margin: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tab.Pane, {\n              eventKey: \"first\",\n              children: [this.state.relations.map(relation => {\n                return /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    backgroundColor: relation.color,\n                    width: '100px',\n                    color: \"white\",\n                    margin: '3px'\n                  },\n                  onClick: event => this.onSelectRelation(relation),\n                  children: relation.typeText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 45\n                }, this);\n              }), relationview]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n              eventKey: \"second\",\n              children: [this.state.agesResource.map(age => {\n                return /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    margin: '3px'\n                  },\n                  onClick: event => this.onSelectAge(age),\n                  children: age.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 41\n                }, this);\n              }), ageview]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n              eventKey: \"third\",\n              children: [this.state.connResource.map(conn => {\n                return /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  style: {\n                    margin: '3px'\n                  },\n                  onClick: event => this.onSelectConn(conn),\n                  children: conn.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 41\n                }, this);\n              }), connview]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default DataBuilder;","map":{"version":3,"sources":["/home/ben/research/2020/11_november/potter_graph/app/src/Config.js"],"names":["React","Button","ButtonGroup","Container","Dropdown","InputGroup","FormControl","Form","ListGroup","ListGroupItem","OverlayTrigger","Popover","Tab","Tabs","Row","Nav","Highlighter","book_info","b1","b2","b3","b4","b5","b6","b7","RelationView","Component","constructor","props","render","relation","relations","height","overflowY","marginTop","top_sentence","size","key_words","map","kw","margin","r","s","bi","book","chapter","slice","page","rc","p","t","AgeView","age","age_freq","Object","entries","relation_frequency","marginRight","frequency","n_characters","c","console","log","scale","color","config","backgroundColor","width","characters","ConnView","conn","conn_freq","DataBuilder","buttonClick","event","state","newQuery","handleClusterQuery","query","push","setState","parentCallback","onSelectRelation","e","relationid","parseInt","cluster","handleAgeQuery","onSelectAge","onSelectConn","JSON","parse","require","data","relationslist","ages","buildconfig","builddata","newData","EdgeTypes","relationview","agesResource","connResource","bind","getRelation","NodeTypes","type","shape","typeText","fill","PotterConfig","NodeSubtypes","response","fetch","method","headers","body","stringify","json","ref","ageview","connview","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, ButtonGroup, Container, Dropdown, InputGroup, FormControl, Form, ListGroup, ListGroupItem, OverlayTrigger, Popover, Tab, Tabs, Row, Nav } from 'react-bootstrap';\nimport Highlighter from \"react-highlight-words\";\n\n\nconst book_info = {\n    b1: \"Philosopher's Stone\",\n    b2: \"Chamber of Secrets\",\n    b3: \"Prisoner of Azkaban\",\n    b4: \"Goblet of Fire\",\n    b5: \"Order of the Phoenix\",\n    b6: \"Half-Blood Prince\",\n    b7: \"Deathly Hallows\"\n}\n\nclass RelationView extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    // onSelectPanNode = (event) => {\n    //     if (this.GraphView) {\n    //       this.ref.GraphView.panToNode(event.target.value, true);\n    //     }\n    //   };\n\n    render () {\n\n        var relation = this.props.relations;\n\n        return (\n            <div style={{height : '70vh', overflowY:'scroll', marginTop: '20px'}}>\n             <Tabs defaultActiveKey=\"info\" >\n                <Tab eventKey=\"info\" title=\"Relation Info\">\n\n                    <ListGroup>\n                        <ListGroupItem>\n                            <ButtonGroup>\n                                <Button variant = 'outline-secondary' >source</Button>\n                                <Button variant = 'outline-secondary' >{relation.top_sentence}</Button>\n                                <Button variant = 'outline-secondary' >target</Button>\n                            </ButtonGroup>\n                        </ListGroupItem>\n                        <ListGroupItem>\n                        <ButtonGroup>\n                                <Button variant = 'outline-secondary' >size</Button>\n                                <Button variant = 'outline-secondary' >{relation.size}</Button>\n                            </ButtonGroup>\n                        </ListGroupItem>\n                        <ListGroupItem>\n\n                            {relation.key_words.map(kw => {\n                                        return (<Button variant = 'outline-secondary' style={{margin : '2px'}}>{kw}</Button>)\n                            }\n                                \n                                )}\n                        </ListGroupItem>\n                    </ListGroup>\n\n                </Tab>\n                <Tab eventKey=\"profile\" title=\"Examples\">\n                    <ListGroup>\n                        {relation.relations.map( r => {\n                            return (\n                                <ListGroupItem>\n                                    <ButtonGroup className=\"d-flex\">\n                                        <Button variant = 'outline-secondary'>{r.s}</Button>\n\n\n                                        <OverlayTrigger\n                                            trigger=\"click\"\n                                            key='paragraph'\n                                            placement='top'\n                                            overlay={\n                                                <Popover id={`popover-positioned-top`}>\n                                                <Popover.Title as=\"h3\">Book: {book_info[r.bi.book]} Chapter : {r.bi.chapter.slice(1)} Page :{r.bi.page.slice(1)}</Popover.Title>\n                                                <Popover.Content>\n                                                <Highlighter\n                                                        highlightClassName=\"highlighted\"\n                                                        searchWords={[r.rc]}\n                                                        autoEscape={true}\n                                                        textToHighlight={r.p}\n                                                    />\n                                                </Popover.Content>\n                                                </Popover>\n                                            }\n                                            >\n                                            <Button block variant = 'outline-secondary'>{r.rc.slice(0,20)}...</Button>\n                                            </OverlayTrigger>\n                                            \n                                            <Button variant = 'outline-secondary'>{r.t}</Button>\n                                        {/* add overlay */}\n                                    </ButtonGroup>\n                                </ListGroupItem>\n                            )\n                    })}     \n                    </ListGroup>            \n                </Tab>\n\n                </Tabs>\n                </div>\n\n            \n        )\n    }\n\n\n}\n\nclass AgeView extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render () {\n\n        var age = this.props.age;\n        var age_freq = Object.entries(age.relation_frequency)\n\n        return (\n\n\n                <div style={{height : '70vh', overflowY:'scroll', marginTop: '20px'}}>\n                <Tabs >\n                <Tab eventKey=\"info\" title=\"Relation Info\">\n\n                    <ListGroup>\n                        <ListGroupItem>\n\n\n                        </ListGroupItem>\n                        <ListGroupItem>\n                        <ButtonGroup>\n                                <Button variant = 'outline-secondary' >Frequency</Button>\n                                <Button variant = 'outline-secondary' style={{marginRight : '3px'}} >{age.frequency}</Button>\n                        </ButtonGroup>\n                        <ButtonGroup>\n                                <Button variant = 'outline-secondary' >n Charcters</Button>\n                                <Button variant = 'outline-secondary' >{age.n_characters}</Button>\n                        </ButtonGroup>\n                        </ListGroupItem>\n                        <ListGroupItem>\n                            <ButtonGroup>\n                            {age_freq.map(c => {\n                                console.log(c)\n                                var scale = (c[1]/age.frequency)*10\n                                \n                                try {\n                                    var color = this.props.config[c[0]].color\n                                } catch {\n                                    var color = 'white'\n                                }\n                                        return (<Button variant = 'outline-secondary' \n                                                        style={{backgroundColor : color, width: `${scale}%`}}></Button>)\n                            })}\n                            </ButtonGroup>\n\n                        </ListGroupItem>\n\n                        <ListGroupItem>\n\n                            {age.characters.map(c => {\n                                        return (<Button variant = 'outline-secondary' style={{margin : '3px'}}>{c}</Button>)\n                            }\n                                \n                                )}\n                        </ListGroupItem>\n                    </ListGroup>\n\n                </Tab>\n                <Tab eventKey=\"profile\" title=\"Examples\">\n                    <ListGroup>\n                        {age.relations.map( r => {\n                            return (\n                                <ListGroupItem>\n                                    <ButtonGroup className=\"d-flex\">\n                                        <Button variant = 'outline-secondary'>{r.s}</Button>\n\n\n                                        <OverlayTrigger\n                                            trigger=\"click\"\n                                            key='paragraph'\n                                            placement='top'\n                                            overlay={\n                                                <Popover id={`popover-positioned-top`}>\n                                                <Popover.Title as=\"h3\">book placement</Popover.Title>\n                                                <Popover.Content>\n                                                <Highlighter\n                                                        highlightClassName=\"highlighted\"\n                                                        searchWords={[r.rc]}\n                                                        autoEscape={true}\n                                                        textToHighlight={r.rc}\n                                                    />\n                                                </Popover.Content>\n                                                </Popover>\n                                            }\n                                            >\n                                            <Button block variant = 'outline-secondary'>{r.rc.slice(0,20)}...</Button>\n                                            </OverlayTrigger>\n                                            \n                                            <Button variant = 'outline-secondary'>{r.t}</Button>\n                                        {/* add overlay */}\n                                    </ButtonGroup>\n                                </ListGroupItem>\n                            )\n                    })}     \n                    </ListGroup>            \n                </Tab>\n                </Tabs>\n                </div>\n            \n        )\n    }\n\n\n}\n\nclass ConnView extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render () {\n\n        var conn = this.props.conn;\n        var conn_freq = Object.entries(conn.relation_frequency)\n\n        return (\n\n\n                <div style={{height : '70vh', overflowY:'scroll', marginTop: '20px'}}>\n                <Tabs >\n                <Tab eventKey=\"info\" title=\"Relation Info\">\n\n                    <ListGroup>\n                        <ListGroupItem>\n\n\n                        </ListGroupItem>\n                        <ListGroupItem>\n                        <ButtonGroup>\n                                <Button variant = 'outline-secondary' >Frequency</Button>\n                                <Button variant = 'outline-secondary' style={{marginRight : '3px'}} >{conn.frequency}</Button>\n                        </ButtonGroup>\n                        </ListGroupItem>\n                        <ListGroupItem>\n                            <ButtonGroup>\n                            {conn_freq.map(c => {\n                                // console.log(c)\n                                var scale = (c[1]/conn.frequency)*10\n                                \n                                try {\n                                    var color = this.props.config[c[0]].color\n                                } catch {\n                                    var color = 'white'\n                                }\n                                        return (<Button variant = 'outline-secondary' \n                                                        style={{backgroundColor : color, width: `${scale}%`}}></Button>)\n                            })}\n                            </ButtonGroup>\n\n                        </ListGroupItem>\n\n                    </ListGroup>\n\n                </Tab>\n                <Tab eventKey=\"profile\" title=\"Examples\">\n                    <ListGroup>\n                        {conn.relations.map( r => {\n                            return (\n                                <ListGroupItem>\n                                    <ButtonGroup className=\"d-flex\">\n                                        <Button variant = 'outline-secondary'>{r.s}</Button>\n\n\n                                        <OverlayTrigger\n                                            trigger=\"click\"\n                                            key='paragraph'\n                                            placement='top'\n                                            overlay={\n                                                <Popover id={`popover-positioned-top`}>\n                                                <Popover.Title as=\"h3\">book placement</Popover.Title>\n                                                <Popover.Content>\n                                                <Highlighter\n                                                        highlightClassName=\"highlighted\"\n                                                        searchWords={[r.rc]}\n                                                        autoEscape={true}\n                                                        textToHighlight={r.rc}\n                                                    />\n                                                </Popover.Content>\n                                                </Popover>\n                                            }\n                                            >\n                                            <Button block variant = 'outline-secondary'>{r.rc.slice(0,20)}...</Button>\n                                            </OverlayTrigger>\n                                            \n                                            <Button variant = 'outline-secondary'>{r.t}</Button>\n                                        {/* add overlay */}\n                                    </ButtonGroup>\n                                </ListGroupItem>\n                            )\n                    })}     \n                    </ListGroup>            \n                </Tab>\n                </Tabs>\n                </div>\n            \n        )\n    }\n\n\n}\n\nclass DataBuilder extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        var config = JSON.parse(require('./config.json'));\n        var data = JSON.parse(require('./data.json'));\n        var relationslist = JSON.parse(require('./relations.json'));\n        var ages = JSON.parse(require('./ages.json'));\n        var conn = JSON.parse(require('./connections.json'));\n        \n        this.state = {\n            config : this.buildconfig(config),\n            data : this.builddata(data),\n            query : [],\n            newQuery : null,\n            newData : true,\n            relations : config.EdgeTypes,\n            relationview : null,\n            relationid : null,\n            relationslist :relationslist,\n            agesResource : ages,\n            connResource : conn\n        };\n\n        this.buttonClick = this.buttonClick.bind(this);\n        this.handleClusterQuery = this.handleClusterQuery.bind(this);\n        this.getRelation = this.getRelation.bind(this);\n        this.onSelectRelation = this.onSelectRelation.bind(this);\n        // this.doData = this.doData.bind(this);\n\n        // this.componentDidUpdate = this.componentDidUpdate.bind(this);\n        // this.componentDidMount = this.componentDidUpdate.bind(this);\n    }\n\n    buildconfig(config) {\n        \n        var NodeTypes = {}\n    \n        config.NodeTypes.map( type => {\n            type.shape =  (\n                    <symbol viewBox=\"0 0 100 100\" id={type.typeText} key=\"0\">\n                        <circle cx=\"50\" cy=\"50\" r=\"45\" style={{ color : '#ffffff' , \n                                                                fill : type.color}} ></circle>\n                    </symbol>\n                    )\n            NodeTypes[type.typeText] = type\n            \n        })\n        \n        var EdgeTypes = {}\n        \n        config.EdgeTypes.map( type => {\n            type.shape = (\n                    <symbol viewBox=\"0 0 200 200\" id={type.typeText} key=\"0\" label_from = {type.typeText}>\n                        <circle cx=\"100\" cy=\"100\" r=\"45\" fill={type.color}></circle>\n                    </symbol>\n            )\n            EdgeTypes[type.typeText] = type\n        })\n        \n        var PotterConfig =  {\n            NodeTypes: NodeTypes,\n            NodeSubtypes: {},\n            EdgeTypes: EdgeTypes\n          }\n          \n        return PotterConfig;\n    }\n\n    builddata(data) { \n        return data\n    }\n\n    async getRelation() {\n\n        const response = await fetch('http://localhost:5000/cluster', {\n        method: 'POST', // or 'PUT'\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(this.state.query)\n        })\n\n        const data = await response.json()\n\n        console.log(data)\n\n        this.setState({\n            data: this.builddata(data.data),\n            config: this.buildconfig(data.config)})\n\n      }\n    \n\n    buttonClick = (event) => {\n\n        if (this.state.newQuery) {\n            // this.props.parentCallback({data: null,\n            //     config: null});\n            // this.setState({ newQuery : false });\n            // this.getRelation();\n        }\n        \n        // this.props.parentCallback({data: this.state.data,\n        //                             config: this.state.config});\n\n        // event.preventDefault();\n    }\n\n\n    handleClusterQuery = (event) => {\n        this.state.query.push(event);\n        this.setState({ newQuery : true});\n        this.props.parentCallback({query: this.state.query});\n        // event.preventDefault();\n    }\n\n\n    onSelectRelation = (e) => {\n        this.setState({relationid : parseInt(e.cluster)})   \n        \n    }\n\n    handleAgeQuery = (event) => {\n        // this.state.query.push(event);\n        // this.setState({ newQuery : true});\n        // this.props.parentCallback({query: this.state.query});\n        // event.preventDefault();\n    }\n\n\n    onSelectAge = (e) => {\n        this.setState({age : e})   \n        \n    }\n\n    onSelectConn = (e) => {\n        this.setState({conn : e})   \n        \n    }\n\n    // componentDidMount () {\n    //     this.props.parentCallback({data: this.state.data,\n    //         config: this.state.config});\n    // }\n\n    render () {\n\n        var relationview = (this.state.relationid) ? <RelationView ref = {this.props.ref} relations = {this.state.relationslist[this.state.relationid]} /> : <div></div>\n        var ageview = (this.state.age) ? <AgeView config = {this.state.config.EdgeTypes} age = {this.state.age} /> : <div></div>\n        var connview = (this.state.conn) ? <ConnView config = {this.state.config.EdgeTypes} conn = {this.state.conn} /> : <div></div>\n        return (\n\n            <Container>\n                <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\">\n                    <Row>\n                        <Nav variant=\"tabs\" className=\"flex-row\">\n                            <Nav.Item>\n                            <Nav.Link eventKey=\"first\">Relations</Nav.Link>\n                            </Nav.Item>\n                            <Nav.Item>\n                            <Nav.Link eventKey=\"second\">Ages</Nav.Link>\n                            </Nav.Item>\n                            <Nav.Item>\n                            <Nav.Link eventKey=\"third\">Connections</Nav.Link>\n                            </Nav.Item>\n                        </Nav>\n                    </Row>\n                    <Row>\n                    <Tab.Content style={{margin : '20px'}}>\n                            <Tab.Pane eventKey=\"first\">\n\n                                \n                                {this.state.relations.map(relation => {\n                                    return (\n                                            <Button \n                                                variant = 'outline-secondary' \n                                                style = {{backgroundColor : relation.color, width : '100px', color : \"white\", margin: '3px'}} \n                                                onClick = {(event) => this.onSelectRelation(relation)}>{relation.typeText}\n                                            </Button>\n\n                                            )\n                                })}\n                                {relationview}\n                                \n                            </Tab.Pane>\n                            <Tab.Pane eventKey=\"second\" >\n                                {this.state.agesResource.map(age => {\n                                    return (\n                                        \n                                        <Button variant = 'outline-secondary' \n                                                style={{margin : '3px'}} \n                                                onClick = {(event) => this.onSelectAge(age)}>{age.id}</Button>\n                                        \n                                            )\n                                })}\n                                {ageview}\n                                \n                            </Tab.Pane>\n                            <Tab.Pane eventKey=\"third\" >\n                                {this.state.connResource.map(conn => {\n                                    return (\n                                        \n                                        <Button variant = 'outline-secondary' \n                                                style={{margin : '3px'}} \n                                                onClick = {(event) => this.onSelectConn(conn)}>{conn.id}</Button>\n                                        \n                                            )\n                                })}\n                                {connview}\n                                \n                            </Tab.Pane>\n                        </Tab.Content>\n                    </Row>\n                    </Tab.Container>\n            </Container>\n            \n        )}\n}\n\n\nexport default DataBuilder;"]},"metadata":{},"sourceType":"module"}