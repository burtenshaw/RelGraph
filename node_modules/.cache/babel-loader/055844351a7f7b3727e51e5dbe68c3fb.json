{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ben/research/2020/11_november/potter_graph/app/src/Config.js\";\nimport React from 'react';\nimport { Button, ButtonGroup, Dropdown } from 'react-bootstrap';\n\nclass DataBuilder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.buttonClick = event => {\n      this.doData();\n      this.props.parentCallback({\n        data: this.state.data,\n        config: this.state.config\n      });\n      event.preventDefault();\n    };\n\n    this.handleClusterQuery = e => {\n      this.state.query.push(e);\n      this.setState({\n        newQuery: true\n      });\n    };\n\n    var config = JSON.parse(require('./config.json'));\n    this.state = {\n      config: this.buildconfig(config),\n      data: this.builddata(),\n      query: [],\n      newQuery: null,\n      newData: true\n    };\n    this.buttonClick = this.buttonClick.bind(this);\n    this.handleClusterQuery = this.handleClusterQuery.bind(this);\n    this.getRelation = this.getRelation.bind(this);\n    this.doData = this.doData.bind(this);\n    this.componentDidUpdate = this.componentDidUpdate.bind(this);\n    this.componentDidMount = this.componentDidUpdate.bind(this);\n  }\n\n  buildconfig(config) {\n    var NodeTypes = {};\n    config.NodeTypes.map(type => {\n      type.shape = /*#__PURE__*/_jsxDEV(\"symbol\", {\n        viewBox: \"0 0 100 100\",\n        id: type.typeText,\n        children: /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"50\",\n          cy: \"50\",\n          r: \"45\",\n          style: {\n            color: '#ffffff',\n            fill: type.color\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 25\n        }, this)\n      }, \"0\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 21\n      }, this);\n      NodeTypes[type.typeText] = type;\n    });\n    var EdgeTypes = {};\n    config.EdgeTypes.map(type => {\n      type.shape = /*#__PURE__*/_jsxDEV(\"symbol\", {\n        viewBox: \"0 0 200 200\",\n        id: type.typeText,\n        label_from: type.typeText,\n        children: /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"100\",\n          cy: \"100\",\n          r: \"45\",\n          fill: type.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 25\n        }, this)\n      }, \"0\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this);\n      EdgeTypes[type.typeText] = type;\n    });\n    var PotterConfig = {\n      NodeTypes: NodeTypes,\n      NodeSubtypes: {},\n      EdgeTypes: EdgeTypes\n    };\n    return PotterConfig;\n  }\n\n  builddata(data) {\n    return data;\n  }\n\n  async getRelation() {\n    await fetch('http://localhost:5001/cluster', {\n      method: 'POST',\n      // or 'PUT'\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(this.state.query)\n    }).then(data => this.setState({\n      response: data.json(),\n      newQuery: false\n    }));\n  }\n\n  doData() {\n    if (this.state.newData) {\n      this.setState({\n        config: this.buildconfig(),\n        data: this.builddata(),\n        newData: false\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.newQuery) {\n      this.getRelation();\n    }\n  }\n\n  componentDidMount() {\n    this.doData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(ButtonGroup, {\n      children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n          variant: \"success\",\n          id: \"dropdown-basic\",\n          children: \"Dropdown Button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onSelect: this.handleClusterQuery,\n            eventKey: \"cluster0\",\n            children: \"cluster0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onSelect: this.handleClusterQuery,\n            eventKey: \"cluster1\",\n            children: \"cluster1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onSelect: this.handleClusterQuery,\n            eventKey: \"cluster2\",\n            children: \"cluster2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.buttonClick,\n        children: \" Get Data \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default DataBuilder;","map":{"version":3,"sources":["/home/ben/research/2020/11_november/potter_graph/app/src/Config.js"],"names":["React","Button","ButtonGroup","Dropdown","DataBuilder","Component","constructor","props","buttonClick","event","doData","parentCallback","data","state","config","preventDefault","handleClusterQuery","e","query","push","setState","newQuery","JSON","parse","require","buildconfig","builddata","newData","bind","getRelation","componentDidUpdate","componentDidMount","NodeTypes","map","type","shape","typeText","color","fill","EdgeTypes","PotterConfig","NodeSubtypes","fetch","method","headers","body","stringify","then","response","json","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, ButtonGroup, Dropdown } from 'react-bootstrap';\n\n\nclass DataBuilder extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        var config = JSON.parse(require('./config.json'));\n\n        this.state = {\n            config : this.buildconfig(config),\n            data : this.builddata(),\n            query : [],\n            newQuery : null,\n            newData : true\n        };\n\n        this.buttonClick = this.buttonClick.bind(this);\n        this.handleClusterQuery = this.handleClusterQuery.bind(this);\n        this.getRelation = this.getRelation.bind(this);\n        this.doData = this.doData.bind(this);\n\n        this.componentDidUpdate = this.componentDidUpdate.bind(this);\n        this.componentDidMount = this.componentDidUpdate.bind(this);\n    }\n\n    buildconfig(config) {\n        \n        var NodeTypes = {}\n    \n        config.NodeTypes.map( type => {\n            type.shape =  (\n                    <symbol viewBox=\"0 0 100 100\" id={type.typeText} key=\"0\">\n                        <circle cx=\"50\" cy=\"50\" r=\"45\" style={{ color : '#ffffff' , \n                                                                fill : type.color}} ></circle>\n                    </symbol>\n                    )\n            NodeTypes[type.typeText] = type\n            \n        })\n        \n        var EdgeTypes = {}\n        \n        config.EdgeTypes.map( type => {\n            type.shape = (\n                    <symbol viewBox=\"0 0 200 200\" id={type.typeText} key=\"0\" label_from = {type.typeText}>\n                        <circle cx=\"100\" cy=\"100\" r=\"45\" fill={type.color}></circle>\n                    </symbol>\n            )\n            EdgeTypes[type.typeText] = type\n        })\n        \n        var PotterConfig =  {\n            NodeTypes: NodeTypes,\n            NodeSubtypes: {},\n            EdgeTypes: EdgeTypes\n          }\n          \n        return PotterConfig;\n    }\n\n    builddata(data) {  \n        return data\n    }\n\n    async getRelation() {\n\n        await fetch('http://localhost:5001/cluster', {\n        method: 'POST', // or 'PUT'\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(this.state.query)\n        }).then ( data => \n        \n        this.setState({\n            response:data.json(),\n            newQuery: false\n            })\n        );\n        \n      }\n    \n    doData() {\n        if (this.state.newData) {\n            this.setState({\n                config : this.buildconfig(),\n                data : this.builddata(),\n                newData : false\n            });\n\n        }\n        \n    }\n\n    buttonClick = (event) => {\n        \n        this.doData();\n        \n        this.props.parentCallback({data: this.state.data,\n                                    config: this.state.config})\n\n        event.preventDefault();\n    }\n\n    handleClusterQuery = (e) => {\n        this.state.query.push(e);\n        this.setState({ newQuery : true})\n    }\n\n    componentDidUpdate() {\n        if (this.newQuery) {\n            this.getRelation();\n        }\n    }\n\n    componentDidMount () {\n        this.doData();\n    }\n\n    render(){\n        return (\n            <ButtonGroup>\n                <Dropdown>\n                    <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                        Dropdown Button\n                    </Dropdown.Toggle>\n\n                    <Dropdown.Menu >\n                        <Dropdown.Item onSelect = {this.handleClusterQuery} eventKey = 'cluster0' >cluster0</Dropdown.Item>\n                        <Dropdown.Item onSelect = {this.handleClusterQuery} eventKey = 'cluster1' >cluster1</Dropdown.Item>\n                        <Dropdown.Item onSelect = {this.handleClusterQuery} eventKey = 'cluster2' >cluster2</Dropdown.Item>\n                    </Dropdown.Menu>\n                </Dropdown>\n                <Button onClick = {this.buttonClick}> Get Data </Button>\n            </ButtonGroup>\n            \n        )}\n}\n\n\nexport default DataBuilder;"]},"metadata":{},"sourceType":"module"}